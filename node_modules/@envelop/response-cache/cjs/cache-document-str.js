"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.defaultGetDocumentString = exports.useCacheDocumentString = void 0;
const graphql_1 = require("graphql");
const documentStringByDocument = new WeakMap();
function useCacheDocumentString() {
    return {
        onParse({ params: { source } }) {
            return function onParseEnd({ result }) {
                if (result != null && !(result instanceof Error)) {
                    documentStringByDocument.set(result, source.toString());
                }
            };
        },
    };
}
exports.useCacheDocumentString = useCacheDocumentString;
function defaultGetDocumentString(executionArgs) {
    let documentString = documentStringByDocument.get(executionArgs.document);
    if (documentString == null) {
        documentString = (0, graphql_1.print)(executionArgs.document);
        documentStringByDocument.set(executionArgs.document, documentString);
    }
    return documentString;
}
exports.defaultGetDocumentString = defaultGetDocumentString;
